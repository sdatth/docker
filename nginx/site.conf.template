server {
    listen 80 default_server;

    # TRUST TRAEFIK
    real_ip_header X-Forwarded-For;
    real_ip_recursive on;

    # VERY IMPORTANT: trust Traefik network
    set_real_ip_from 172.16.0.0/12;
    set_real_ip_from 10.0.0.0/8;
    set_real_ip_from 192.168.0.0/16;

    location / {
        default_type text/plain;

        return 200
"Server Hostname : ${HOST_HOSTNAME}
Public Server IP: ${PUBLIC_IP}
Client IP       : $remote_addr
";
    }
}

